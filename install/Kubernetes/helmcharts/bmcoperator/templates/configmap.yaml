apiVersion: v1
data:
  controller_manager_config.yaml: |
    apiVersion: controller-runtime.sigs.k8s.io/v1alpha1
    kind: ControllerManagerConfig
    health:
      healthProbeBindAddress: :8081
    metrics:
      bindAddress: 127.0.0.1:8080
    webhook:
      port: 9443
    leaderElection:
      leaderElect: true
      resourceName: a247721e.odimra
kind: ConfigMap
metadata:
  name: bmc-opmanager-config
  namespace: {{ .Values.namespace }}
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: config
  namespace: {{ .Values.namespace }}
  labels:
    type: config
data:
  reconciliation : {{ .Values.reconciliation }}
  eventSubReconciliation: {{ .Values.reconciliation}}
  reconcileInterval: "{{ .Values.reconcileInterval }}"
  secretName: bmc-secret
  metricsBindPort: "8080"
  healthProbeBindPort: "8081"
  eventClientPort: "45000"
  logLevel: {{ .Values.logLevel }}
  logFormat: {{ .Values.logFormat }}
  kubeConfigPath: ""
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: bmc-operator-config
  namespace: {{ .Values.namespace }}
  labels:
    type: config
data:
  config.yaml: |
    reconciliation : {{ .Values.reconciliation }}
    eventSubReconciliation: Accommodate #Accommodate/Revert
    reconcileInterval: "{{ .Values.reconcileInterval }}"
    secretName: bmc-secret
    metricsBindPort: "8080"  # cannot change at runtime (in string)
    healthProbeBindPort: "8081" # cannot change at runtime (in string)
    eventClientPort: "45000" # cannot change at runtime (in string)
    logLevel: {{ .Values.logLevel }}
    logFormat: {{ .Values.logFormat }}
    kubeConfigPath: # provide kube config file path as value when running with 'make install run' command
    namespace: {{ .Values.namespace }}
    operatorEventSubscriptionEventTypes:
  {{- range .Values.operatorEventSubscriptionEventTypes }}
    - {{ . }}
  {{- end }}
    operatorEventSubscriptionMessageIds:
  {{- range .Values.operatorEventSubscriptionMessageIds }}
    - {{ . }}
  {{- end }}
    operatorEventSubsciptionResourceTypes:
  {{- range .Values.operatorEventSubscriptionResourceTypes }}
    - {{ . }}
  {{- end }}


